"use strict";(self.webpackChunkppx_gatsby_blog=self.webpackChunkppx_gatsby_blog||[]).push([[151],{8861:function(e,n,t){t.r(n),t.d(n,{Head:function(){return g},default:function(){return p}});var l=t(6736),a=t(959);function r(e){const n=Object.assign({h2:"h2",ol:"ol",li:"li",code:"code",h3:"h3",p:"p",a:"a",span:"span",ul:"ul",pre:"pre"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.h2,null,"安装流程"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"install home brew"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew tap mongodb/brew")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew install mongodb-community@5.0")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew services list")),"\n"),"\n",a.createElement(n.h2,null,"坑"),"\n",a.createElement(n.h3,null,"Two ways to start service"),"\n",a.createElement(n.p,null,"根据",a.createElement(n.a,{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/"},"mongodb文档"),", step 3和step 4中间还有一步 ",a.createElement(n.code,null,"brew services start mongodb-community@5.0"),"."),"\n",a.createElement(n.p,null,"我们首先需要知道mongodb有两部分构成, server和client. 开启server的命令为 ",a.createElement(n.code,null,"mongod (other parameters...)"),", 开启client的命令为",a.createElement(n.code,null,"mongo"),"."),"\n",a.createElement(n.p,null,"而官网所说的",a.createElement(n.code,null,"brew services start mongodb-community@5.0")," 其实会直接运行default mongod command. 而默认的server db存储位置为",a.createElement(n.code,null,"/data/db"),".  ",a.createElement(n.code,null,"/")," 是mac的read-only space, 我们不可以在这里mkdir, 而他本来就没有/data/db这个folder, 所以我们运行官网给出的",a.createElement(n.code,null,"brew services start mongodb-community@5.0")," 后再运行 ",a.createElement(n.code,null,"brew services list")," 就会显示 3584 error."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/e464eb4b23519c39af0c037bddccc085/8efc2/error.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 22.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIElEQVR42j2Q3U6DQBCFeQYs/ywLLX+ltqL8QyuQVmJMaGKixrfw0mfyTbzzZbw/7q7Riy9nNjlzZnak769XfH7MsCMPtE5AshBhEqMfRlzudqjbFt3hgOVqhbpp0LQdqOvCtKx/LNsWapgmpPe3R8z3OTTDgEUJTJfAJgQua+LqUCoQjeyt6zoURcGCobGaw2tV034Dj9MMP0wgy7Iwa6oGRVUF3PynHNtxkJcl0uwGeVWKTcMoQllViOIYOltKen55QlEWWPo+XM8TBGEovshrrnw7bnZY4NDuMfUjHu4m4VsnCebzGbd9Dz8IIGVFgT270TCO2KWpCD+eTuxWLa7Sa7Rdx4KoOAkxLWxUgnhhYc24UBUxZLPdsr6KhQ74ARfglK0kp/fiAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="error"\n        title=""\n        src="/static/e464eb4b23519c39af0c037bddccc085/fcda8/error.png"\n        srcset="/static/e464eb4b23519c39af0c037bddccc085/12f09/error.png 148w,\n/static/e464eb4b23519c39af0c037bddccc085/e4a3f/error.png 295w,\n/static/e464eb4b23519c39af0c037bddccc085/fcda8/error.png 590w,\n/static/e464eb4b23519c39af0c037bddccc085/8efc2/error.png 828w"\n        sizes="(max-width: 590px) 100vw, 590px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",a.createElement(n.h3,null,"Fail to stop service"),"\n",a.createElement(n.p,null,"当使用",a.createElement(n.code,null,"brew services start mongodb-community@5.0")," 时我们可以用 ",a.createElement(n.code,null,"brew services stop mongodb-community@5.0")," 停止server."),"\n",a.createElement(n.p,null,"当使用 ",a.createElement(n.code,null,"mongod (other parameters..)"),"时我们有两种方法停止server."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Ctrl+C on the terminal which is running mongod"),"\n",a.createElement(n.li,null,"open a new terminal","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"type ",a.createElement(n.code,null,"mongo")," and hit enter"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"use admin")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"db.shutdownServer()")),"\n"),"\n"),"\n"),"\n",a.createElement(n.h2,null,"填坑"),"\n",a.createElement(n.p,null,"很简单, 不使用brew services start即可. 我们可以使用",a.createElement(n.code,null,"sudo mkdir -p /System/Volumes/Data/data/db ")," 在可写区域创建好db储存的文件夹. 然后用",a.createElement(n.code,null,"sudo mongod --dbpath /System/Volumes/Data/data/db")," 指定server运行时的数据位置. 这时使用",a.createElement(n.code,null,"brew services list")," 则会显示service status started. 之后就可以打开另一个terminal开启client了!"),"\n",a.createElement(n.p,null,"注意: 在做这些事前请确保没有正在运行的mongod(server service)."),"\n",a.createElement(n.h2,null,"卸载流程"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"launchctl list | grep mongo")," to check the running mongo service"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist")," based on which file exists in ",a.createElement(n.code,null,"~/Library/LaunchAgents")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"rm -f ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"launchctl remove homebrew.mxcl.mongodb")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"pkill -f mongod"),"  Kill all the processes related to mongod"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew uninstall mongodb")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"rm -rf /opt/homebrew/var/mongodb")," Data Directory"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew cleanup -s mongodb-community")),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"brew cleanup --prune-prefix")),"\n"),"\n",a.createElement(n.h2,null,"Resource"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-plain"},"https://docs.mongodb.com/manual/tutorial/manage-mongodb-processes/\nhttps://www.mongodb.com/community/forums/t/help-brew-mongodb-community-5-0-error-macos/125648\nhttps://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/\nhttps://rajanmaharjan.medium.com/uninstall-mongodb-macos-completely-d2a6d6c163f9\n")))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(r,e)):r(e)},o=t(9980),m=t(3090),s=t(5731),d=t(6564);const i={code:e=>{let{children:n,className:t}=e;return t?a.createElement(s.Z,{className:t},n):a.createElement("code",{className:"bg-bg-code-light dark:bg-bg-code-dark text-font-code-light dark:text-font-code-dark"},n)}},u=e=>{const{data:n,children:t}=e;if(!n.mdx||!n.mdx.frontmatter)return null;const r=n.mdx.frontmatter;return a.createElement(o.Z,{pageTitle:r.title},a.createElement("div",null,a.createElement("header",{className:"pt-6 xl:pb-6"},a.createElement("div",{className:"text-center space-y-1"},a.createElement("div",{className:"space-y-10"},a.createElement("div",null,a.createElement("p",{className:"text-base font-medium leading-6 text-teal-500"},r.date))),a.createElement("div",null,a.createElement("h1",{className:"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14"},r.title)))),a.createElement("div",{className:"divide-y divide-gray-200 pb-7 dark:divide-gray-700 xl:divide-y-0"},a.createElement("div",{className:"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"},a.createElement("div",{className:"prose max-w-none pb-8 pt-10 dark:prose-invert prose-lg prose-pre:p-0 prose-pre:m-0 prose-pre:bg-transparent"},a.createElement(l.Zo,{components:i},t))))),a.createElement(d.Z,null))},g=e=>{const{data:n,children:t}=e;if(!n.mdx||!n.mdx.frontmatter)return null;const l=n.mdx.frontmatter;return a.createElement(a.Fragment,null,a.createElement("html",{lang:"en"}),a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/qweather-icons@1.4.0/font/qweather-icons.css"}),a.createElement(m.Z,{title:l.title,des:l.description}))};function p(e){return a.createElement(u,e,a.createElement(c,e))}}}]);
//# sourceMappingURL=component---src-pages-blog-mdx-frontmatter-query-id-tsx-content-file-path-blog-mongodb-install-issues-index-mdx-0f23887fd89bf67a9b67.js.map